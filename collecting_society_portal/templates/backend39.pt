<!--! For copyright / license terms, see COPYRIGHT.rst (top level of repository)
      Repository: https://github.com/C3S/collecting_society.portal -->
<!--!

    Bootstrap based, responsive template for the backend.

    Structure:

    - Two columns (3-9)

    Slots filled (base):

    - css
    - content

    Slots defined:

    - content-left
    - content-right

    Content defined:

    - css               (static:   static/css/backend.css)
    - logo              (registry: static/logo)
    - sidebar widgets   (registry: widgets/content-right/*)
    - main menue tabs   (registry: menues/roles)
    - main menue        (registry: menues/main)
    - top menue         (registry: menues/top)
    - flashmessages     (request)

-->
<tal:block metal:extend-macro="base" i18n:domain="collecting_society_portal">

    <!-- css -->
    <tal:block metal:fill-slot="css">
        <link href="${request.static_path(
                  'collecting_society_portal:static/css/backend.css'
              )}"
              type="text/css" rel="stylesheet" media="screen" charset="utf-8" />
    </tal:block>

    <!-- js -->
    <tal:block metal:fill-slot="js-head" />
    <tal:block metal:fill-slot="js-body" />

    <!-- content -->
    <tal:block metal:fill-slot="content">

        <!-- columns -->
        <div class="cs-content cs-backend cs-backend-39 container">

            <div class="row equal">

                <!-- registry: logo -->
                <img tal:attributes="src context.registry['static']['logo']"
                     class="cs-logo col-md-12 hidden-md hidden-lg" />

                <!-- column left -->
                <div class="cs-content-left col-md-3">
                    <div class="col-md-12">

                        <!-- registry: main menue tabs -->
                        <tal:block metal:use-macro="m['nav']"
                                   tal:define="name 'roles';
                                               style 'nav-tabs nav-justified'" />

                        <!-- registry: main menue -->
                        <tal:block metal:use-macro="m['navbar']"
                                   tal:define="name 'main'; style 'navbar-stacked'">
                            <tal:block metal:fill-slot="links">
                                <a tal:attributes="href menu.url" class="clearfix">
                                    <img tal:attributes="src menu.icon"
                                         class="cs-icon img-responsive" />
                                    <div class="cs-title">${menu.name}</div>
                                </a>
                            </tal:block>
                        </tal:block>

                        <!-- slot: content left -->
                        <tal:block metal:define-slot="content-left" />

                    </div>
                </div>

                <!-- column right -->
                <div class="cs-content-right col-md-9">
                    <div class="col-md-12">

                        <!-- registry: language flags -->
                        <div tal:condition="context.registry['meta']['languages']|false"
                            class="cs-langflags">
                            <a tal:repeat="language context.registry['meta']['languages']"
                            tal:attributes="href '?_LOCALE_='+language['id']">
                                <img src="${language['icon']}"
                                    alt="${language['name']}"/>
                            </a>
                        </div>

                        <!-- registry: logo -->
                        <img tal:attributes="src context.registry['static']['logo']"
                             class="cs-logo hidden-xs hidden-sm" />

                        <!-- registry: top menue -->
                        <tal:block metal:use-macro="m['navbar']"
                                   tal:define="name 'top'" />

                        <!-- request: flashmessages -->
                        <div class="alert alert-success" role="alert"
                             tal:condition="request.session.peek_flash(
                                 'main-alert-success')" >
                            <p tal:repeat="message request.session.pop_flash(
                                   'main-alert-success')" >
                                ${message}
                            </p>
                        </div>
                        <div class="alert alert-info" role="alert"
                             tal:condition="request.session.peek_flash(
                                 'main-alert-info')" >
                            <p tal:repeat="message request.session.pop_flash(
                                   'main-alert-info')" >
                                ${message}
                            </p>
                        </div>
                        <div class="alert alert-warning" role="alert"
                             tal:condition="request.session.peek_flash(
                                'main-alert-warning')" >
                            <p tal:repeat="message request.session.pop_flash(
                                   'main-alert-warning')" >
                                ${message}
                            </p>
                        </div>
                        <div class="alert alert-danger" role="alert"
                             tal:condition="request.session.peek_flash(
                                'main-alert-danger')" >
                            <p tal:repeat="message request.session.pop_flash(
                                   'main-alert-danger')" >
                                ${message}
                            </p>
                        </div>

                        <!-- slot: content right -->
                        <tal:block metal:define-slot="content-right" />

                    </div>
                </div>

            </div>
        </div>

    </tal:block>


</tal:block>
