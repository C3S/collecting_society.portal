<tal:block i18n:domain="collecting_society_portal_repertoire"
           tal:define="oid oid|field.oid;
                       name field.name;
                       title title|field.title;
                       actions dumps(field.schema.actions)
                              |dumps(field.widget.actions)
                              |'';
                       min_len min_len|field.schema.min_len
                                      |field.widget.min_len
                                      |0;
                       max_len max_len|field.schema.max_len
                                      |field.widget.max_len
                                      |100000;
                       now_len len(subfields);
                       orderable orderable|field.schema.orderable
                                          |field.widget.orderable
                                          |0;
                       prototype field.widget.prototype(field);
                       errormsg field.errormsg">

    <!-- sequence -->
    <div class="datatable_sequence_${oid}"
         data-data="${data}" data-language="${language}"></div>

    <!-- slot: settings -->
    <script metal:define-slot="settings" />

    <script>
      datatableSequenceSettings = $.extend(true, {
        oid: "${oid}",
        name: "${name}",
        title: "${title}",
        actions: '${actions}',
        minLen: "${min_len}",
        maxLen: "${max_len}",
        orderable: "${orderable}",
        proto: "${prototype}",
        errormsg: "${errormsg}",
        api: "${api}",
      }, datatableSequenceSettings);
    </script>

    <!-- slot: init -->
    <script metal:define-slot="init">
      new deform.DatatableSequence(datatableSequenceSettings).init();
    </script>

</tal:block>